schema: '2.0'
stages:
  loadvoc-fi:
    cmd: venv/bin/annif loadvoc ykl-omikuji-parabel-fi /data/Annif-corpora-restricted/kirjaesittelyt2021/ykl/ykl-classes.tsv
    deps:
    - path: /data/Annif-corpora-restricted/kirjaesittelyt2021/ykl/ykl-classes.tsv
      md5: b2f29070ccedefda72994b8db324e371
      size: 187637
    - path: venv-installed
      md5: c5a0f860381968fb21a3086f9b48068a
      size: 42
    outs:
    - path: data/vocabs/ykl-fi
      md5: e41fe4a174a22af4de852eb50da7a77c.dir
      size: 766170
      nfiles: 3
  train-omikuji-parabel-fi:
    cmd: venv/bin/annif train ykl-omikuji-parabel-fi -j 8 /data/Annif-corpora-restricted/kirjaesittelyt2021/ykl/kvesit-ykl-fin-train.tsv
    deps:
    - path: /data/Annif-corpora-restricted/kirjaesittelyt2021/ykl/kvesit-ykl-fin-train.tsv
      md5: 39070df2de1ed470ef21dca2d0a5554d
      size: 44106743
    - path: data/vocabs/ykl-fi
      md5: e41fe4a174a22af4de852eb50da7a77c.dir
      size: 766170
      nfiles: 3
    - path: venv-installed
      md5: c5a0f860381968fb21a3086f9b48068a
      size: 42
    outs:
    - path: data/projects/ykl-omikuji-parabel-fi
      md5: 12f9c27f86e33dcc5421816a429efcd9.dir
      size: 138025614
      nfiles: 6
  eval-omikuji-parabel-fi:
    cmd: venv/bin/annif eval ykl-omikuji-parabel-fi -j 8 -m Precision@1 -m NDCG --metrics-file
      reports/test-omikuji-parabel-fi.json /data/Annif-corpora-restricted/kirjaesittelyt2021/ykl/kvesit-ykl-fin-test.tsv
    deps:
    - path: /data/Annif-corpora-restricted/kirjaesittelyt2021/ykl/kvesit-ykl-fin-test.tsv
      md5: 9c26fd86d43db53bedef1c0a38f08fc8
      size: 3708388
    - path: data/projects/ykl-omikuji-parabel-fi
      md5: 12f9c27f86e33dcc5421816a429efcd9.dir
      size: 138025614
      nfiles: 6
    - path: venv-installed
      md5: c5a0f860381968fb21a3086f9b48068a
      size: 42
    outs:
    - path: reports/test-omikuji-parabel-fi.json
      md5: 90b249a32b9c690b9866477cfc111beb
      size: 100
  install:
    cmd: python3 -m venv venv && . venv/bin/activate && pip install -U pip wheel setuptools
      && pip install -r requirements.txt && cp requirements.txt venv-installed
    deps:
    - path: requirements.txt
      md5: c5a0f860381968fb21a3086f9b48068a
      size: 42
    outs:
    - path: venv-installed
      md5: c5a0f860381968fb21a3086f9b48068a
      size: 42
