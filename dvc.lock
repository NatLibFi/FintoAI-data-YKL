schema: '2.0'
stages:
  loadvoc-fi:
    cmd: annif loadvoc ykl-omikuji-parabel-fi corpora/ykl-classes.tsv
    deps:
    - path: corpora/ykl-classes.tsv
      md5: b2f29070ccedefda72994b8db324e371
      size: 187637
    - path: venv-installed
      md5: 2e6baa8289dac9e06cb525999eb39a70
      size: 42
    outs:
    - path: data/vocabs/ykl-fi
      md5: 680732b8de9b5108536ccea40462734e.dir
      size: 764449
      nfiles: 3
  train-omikuji-parabel-fi:
    cmd: annif train ykl-omikuji-parabel-fi -j 8 corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
      md5: ffa2c09b76a8a5370dbe71540da8c0ff
      size: 38164190
    - path: data/vocabs/ykl
      md5: 3b9896e0ea6b1a4fa9820f015831fd93.dir
      size: 6503819
      nfiles: 3
    - path: venv-installed
      md5: 2e6baa8289dac9e06cb525999eb39a70
      size: 42
    params:
      projects.toml:
        ykl-omikuji-parabel-fi:
          name: YKL Omikuji Parabel Finnish
          language: fi
          backend: omikuji
          analyzer: voikko(fi)
          vocab: ykl
          ngram: 1
          min_df: 1
    outs:
    - path: data/projects/ykl-omikuji-parabel-fi
      md5: e506a5b142c024d089a449b9ab99da7c.dir
      size: 119198246
      nfiles: 6
  eval-omikuji-parabel-fi:
    cmd: annif eval ykl-omikuji-parabel-fi -j 8 -m Precision@1 -m NDCG --metrics-file
      reports/test-omikuji-parabel-fi.json corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
      md5: e4497d02e1c12d30de314f25ac5c5a8e
      size: 3289456
    - path: data/projects/ykl-omikuji-parabel-fi
      md5: e506a5b142c024d089a449b9ab99da7c.dir
      size: 119198246
      nfiles: 6
    - path: venv-installed
      md5: 2e6baa8289dac9e06cb525999eb39a70
      size: 42
    outs:
    - path: reports/test-omikuji-parabel-fi.json
      md5: e0079ca11936a9627c9ee5b4a23e4c48
      size: 100
  install:
    cmd: python3 -m venv venv && . venv/bin/activate && pip install -U pip wheel setuptools
      && pip install -r requirements.txt && cp requirements.txt venv-installed
    deps:
    - path: requirements.txt
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    outs:
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
  train-omikuji-bonsai-fi:
    cmd: annif train ykl-omikuji-bonsai-fi -j 8 corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
      md5: ffa2c09b76a8a5370dbe71540da8c0ff
      size: 38164190
    - path: data/vocabs/ykl
      md5: 3b9896e0ea6b1a4fa9820f015831fd93.dir
      size: 6503819
      nfiles: 3
    - path: venv-installed
      md5: 2e6baa8289dac9e06cb525999eb39a70
      size: 42
    params:
      projects.toml:
        ykl-omikuji-bonsai-fi:
          name: YKL Omikuji Bonsai Finnish
          language: fi
          backend: omikuji
          cluster_balanced: 'False'
          cluster_k: 100
          max_depth: 3
          analyzer: voikko(fi)
          vocab: ykl
          ngram: 1
          min_df: 1
    outs:
    - path: data/projects/ykl-omikuji-bonsai-fi
      md5: 1166661a5b68a9c155a57d40592d11eb.dir
      size: 114643724
      nfiles: 6
  eval-omikuji-bonsai-fi:
    cmd: annif eval ykl-omikuji-bonsai-fi -j 8 -m Precision@1 -m NDCG --metrics-file
      reports/test-omikuji-bonsai-fi.json corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
      md5: e4497d02e1c12d30de314f25ac5c5a8e
      size: 3289456
    - path: data/projects/ykl-omikuji-bonsai-fi
      md5: 1166661a5b68a9c155a57d40592d11eb.dir
      size: 114643724
      nfiles: 6
    - path: venv-installed
      md5: 2e6baa8289dac9e06cb525999eb39a70
      size: 42
    outs:
    - path: reports/test-omikuji-bonsai-fi.json
      md5: da9fafaa27f186fff29cb24b505c2fa2
      size: 100
  load-vocab:
    cmd: venv/bin/annif load-vocab ykl corpora/ykl-skos.ttl
    deps:
    - path: corpora/ykl-skos.ttl
      md5: fea11c863134c9e8379ea52e0f31e28a
      size: 3901929
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    outs:
    - path: data/vocabs/ykl
      hash: md5
      md5: 5c131b1835b3bbc7402e59c09f9715da.dir
      size: 6504225
      nfiles: 3
  train-omikuji-bonsai@0:
    cmd: venv/bin/annif train ykl-omikuji-bonsai-fi -j 8 corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
      md5: cc52c6a5c21d799aad3fb73a889cd90e
      size: 36684502
    - path: data/vocabs/ykl
      hash: md5
      md5: 5c131b1835b3bbc7402e59c09f9715da.dir
      size: 6504225
      nfiles: 3
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    params:
      projects.toml:
        ykl-omikuji-bonsai-fi:
          name: YKL Omikuji Bonsai Finnish
          language: fi
          backend: omikuji
          cluster_balanced: 'False'
          cluster_k: 100
          max_depth: 3
          analyzer: voikko(fi)
          vocab: ykl
          ngram: 1
          min_df: 1
    outs:
    - path: data/projects/ykl-omikuji-bonsai-fi
      hash: md5
      md5: 461454131eb4f9af1492cd3b6e02721d.dir
      size: 110256194
      nfiles: 6
  eval-omikuji-bonsai@0:
    cmd: venv/bin/annif eval ykl-omikuji-bonsai-fi -j 8 -m Precision@1 -m NDCG --metrics-file
      reports/test-omikuji-bonsai-fi.json --results-file reports/test-omikuji-bonsai-fi.csv
      corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
      md5: 9f8d094ae71ec68c5d40dde46d991e1f
      size: 4534782
    - path: data/projects/ykl-omikuji-bonsai-fi
      hash: md5
      md5: 461454131eb4f9af1492cd3b6e02721d.dir
      size: 110256194
      nfiles: 6
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    outs:
    - path: reports/test-omikuji-bonsai-fi.csv
      hash: md5
      md5: cc974692aa736ebbfd5cc60392d361b0
      size: 236881
    - path: reports/test-omikuji-bonsai-fi.json
      hash: md5
      md5: f412631408a193d1999d84c8791d98a1
      size: 100
  train-omikuji-bonsai@1:
    cmd: venv/bin/annif train ykl-omikuji-bonsai-sv -j 8 corpora/kirjaesittelyt2021/kvesit-ykl-swe-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-swe-train.tsv
      md5: fa74f039e20594e212d2429eb3e74c13
      size: 2367569
    - path: data/vocabs/ykl
      hash: md5
      md5: 5c131b1835b3bbc7402e59c09f9715da.dir
      size: 6504225
      nfiles: 3
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    params:
      projects.toml:
        ykl-omikuji-bonsai-sv:
          name: YKL Omikuji Bonsai Swedish
          language: sv
          backend: omikuji
          cluster_balanced: 'False'
          cluster_k: 100
          max_depth: 3
          analyzer: snowball(swedish)
          vocab: ykl
          ngram: 1
          min_df: 1
    outs:
    - path: data/projects/ykl-omikuji-bonsai-sv
      hash: md5
      md5: 6d917da391ae0fd580fdc84222aaac13.dir
      size: 8501037
      nfiles: 6
  train-omikuji-bonsai@2:
    cmd: venv/bin/annif train ykl-omikuji-bonsai-en -j 8 corpora/kirjaesittelyt2021/kvesit-ykl-eng-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-eng-train.tsv
      md5: 87548d6f8f9a8185dc870e8112668c87
      size: 1730632
    - path: data/vocabs/ykl
      hash: md5
      md5: 5c131b1835b3bbc7402e59c09f9715da.dir
      size: 6504225
      nfiles: 3
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    params:
      projects.toml:
        ykl-omikuji-bonsai-en:
          name: YKL Omikuji Bonsai English
          language: en
          backend: omikuji
          cluster_balanced: 'False'
          cluster_k: 100
          max_depth: 3
          analyzer: snowball(english)
          vocab: ykl
          ngram: 1
          min_df: 1
    outs:
    - path: data/projects/ykl-omikuji-bonsai-en
      hash: md5
      md5: 47f611286c351f599d8841c3a2fecb35.dir
      size: 5272958
      nfiles: 6
  eval-omikuji-bonsai@2:
    cmd: venv/bin/annif eval ykl-omikuji-bonsai-en -j 8 -m Precision@1 -m NDCG --metrics-file
      reports/test-omikuji-bonsai-en.json --results-file reports/test-omikuji-bonsai-en.csv
      corpora/kirjaesittelyt2021/kvesit-ykl-eng-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-eng-test.tsv
      md5: bc7f924d84a20e9ab91e2600fd2415ec
      size: 210866
    - path: data/projects/ykl-omikuji-bonsai-en
      hash: md5
      md5: 47f611286c351f599d8841c3a2fecb35.dir
      size: 5272958
      nfiles: 6
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    outs:
    - path: reports/test-omikuji-bonsai-en.csv
      hash: md5
      md5: 99f2b441f4692f60254787fd95762b42
      size: 212526
    - path: reports/test-omikuji-bonsai-en.json
      hash: md5
      md5: 72c3ca9cf0bf0e320e906f4276306f06
      size: 99
  train-omikuji-parabel@0:
    cmd: venv/bin/annif train ykl-omikuji-parabel-fi -j 8 corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
      md5: cc52c6a5c21d799aad3fb73a889cd90e
      size: 36684502
    - path: data/vocabs/ykl
      hash: md5
      md5: 5c131b1835b3bbc7402e59c09f9715da.dir
      size: 6504225
      nfiles: 3
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    params:
      projects.toml:
        ykl-omikuji-parabel-fi:
          name: YKL Omikuji Parabel Finnish
          language: fi
          backend: omikuji
          analyzer: voikko(fi)
          vocab: ykl
          ngram: 1
          min_df: 1
    outs:
    - path: data/projects/ykl-omikuji-parabel-fi
      hash: md5
      md5: 61dcc5cd50e2a3c1a5560d9137247cc2.dir
      size: 114377643
      nfiles: 6
  eval-omikuji-parabel@0:
    cmd: venv/bin/annif eval ykl-omikuji-parabel-fi -j 8 -m Precision@1 -m NDCG --metrics-file
      reports/test-omikuji-parabel-fi.json --results-file reports/test-omikuji-parabel-fi.csv
      corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
      md5: 9f8d094ae71ec68c5d40dde46d991e1f
      size: 4534782
    - path: data/projects/ykl-omikuji-parabel-fi
      hash: md5
      md5: 61dcc5cd50e2a3c1a5560d9137247cc2.dir
      size: 114377643
      nfiles: 6
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    outs:
    - path: reports/test-omikuji-parabel-fi.csv
      hash: md5
      md5: 1c24e7a07593381c773c1b4daf81f570
      size: 236715
    - path: reports/test-omikuji-parabel-fi.json
      hash: md5
      md5: c18b9e612aaed20ba6eb2f5eb5d12100
      size: 100
  train-omikuji-parabel@1:
    cmd: venv/bin/annif train ykl-omikuji-parabel-sv -j 8 corpora/kirjaesittelyt2021/kvesit-ykl-swe-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-swe-train.tsv
      md5: fa74f039e20594e212d2429eb3e74c13
      size: 2367569
    - path: data/vocabs/ykl
      hash: md5
      md5: 5c131b1835b3bbc7402e59c09f9715da.dir
      size: 6504225
      nfiles: 3
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    params:
      projects.toml:
        ykl-omikuji-parabel-sv:
          name: YKL Omikuji Parabel Swedish
          language: sv
          backend: omikuji
          analyzer: snowball(swedish)
          vocab: ykl
          ngram: 1
          min_df: 1
    outs:
    - path: data/projects/ykl-omikuji-parabel-sv
      hash: md5
      md5: 4020cd82de2a4cbb20e28923b262c64b.dir
      size: 8576058
      nfiles: 6
  eval-omikuji-parabel@1:
    cmd: venv/bin/annif eval ykl-omikuji-parabel-sv -j 8 -m Precision@1 -m NDCG --metrics-file
      reports/test-omikuji-parabel-sv.json --results-file reports/test-omikuji-parabel-sv.csv
      corpora/kirjaesittelyt2021/kvesit-ykl-swe-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-swe-test.tsv
      md5: a9177ace2f0d1dffa6a424fccdf04b37
      size: 287821
    - path: data/projects/ykl-omikuji-parabel-sv
      hash: md5
      md5: 4020cd82de2a4cbb20e28923b262c64b.dir
      size: 8576058
      nfiles: 6
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    outs:
    - path: reports/test-omikuji-parabel-sv.csv
      hash: md5
      md5: a968ccdb553b826fba3f7d5c586251d6
      size: 214165
    - path: reports/test-omikuji-parabel-sv.json
      hash: md5
      md5: c03623333e1b4fc3f8e0b7dba604d500
      size: 87
  train-omikuji-parabel@2:
    cmd: venv/bin/annif train ykl-omikuji-parabel-en -j 8 corpora/kirjaesittelyt2021/kvesit-ykl-eng-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-eng-train.tsv
      md5: 87548d6f8f9a8185dc870e8112668c87
      size: 1730632
    - path: data/vocabs/ykl
      hash: md5
      md5: 5c131b1835b3bbc7402e59c09f9715da.dir
      size: 6504225
      nfiles: 3
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    params:
      projects.toml:
        ykl-omikuji-parabel-en:
          name: YKL Omikuji Parabel English
          language: en
          backend: omikuji
          analyzer: snowball(english)
          vocab: ykl
          ngram: 1
          min_df: 1
    outs:
    - path: data/projects/ykl-omikuji-parabel-en
      hash: md5
      md5: 28992a2d2c454ba1971d1735b4b3d728.dir
      size: 5314679
      nfiles: 6
  eval-omikuji-parabel@2:
    cmd: venv/bin/annif eval ykl-omikuji-parabel-en -j 8 -m Precision@1 -m NDCG --metrics-file
      reports/test-omikuji-parabel-en.json --results-file reports/test-omikuji-parabel-en.csv
      corpora/kirjaesittelyt2021/kvesit-ykl-eng-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-eng-test.tsv
      md5: bc7f924d84a20e9ab91e2600fd2415ec
      size: 210866
    - path: data/projects/ykl-omikuji-parabel-en
      hash: md5
      md5: 28992a2d2c454ba1971d1735b4b3d728.dir
      size: 5314679
      nfiles: 6
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    outs:
    - path: reports/test-omikuji-parabel-en.csv
      hash: md5
      md5: c95bdf9a6d38b6cfc497d1037b52b020
      size: 212524
    - path: reports/test-omikuji-parabel-en.json
      hash: md5
      md5: 1cf923f274f5ea770300d617ac38aef9
      size: 99
  eval-omikuji-bonsai@1:
    cmd: venv/bin/annif eval ykl-omikuji-bonsai-sv -j 8 -m Precision@1 -m NDCG --metrics-file
      reports/test-omikuji-bonsai-sv.json --results-file reports/test-omikuji-bonsai-sv.csv
      corpora/kirjaesittelyt2021/kvesit-ykl-swe-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-swe-test.tsv
      md5: a9177ace2f0d1dffa6a424fccdf04b37
      size: 287821
    - path: data/projects/ykl-omikuji-bonsai-sv
      hash: md5
      md5: 6d917da391ae0fd580fdc84222aaac13.dir
      size: 8501037
      nfiles: 6
    - path: venv-installed
      hash: md5
      md5: f85f21b68735b126c2241fbff83fd0ef
      size: 41
    outs:
    - path: reports/test-omikuji-bonsai-sv.csv
      hash: md5
      md5: b5559e6165af8d06f620cb474ef46f7d
      size: 214230
    - path: reports/test-omikuji-bonsai-sv.json
      hash: md5
      md5: e31bfba4ff0464ce48447bafd90eb271
      size: 85
