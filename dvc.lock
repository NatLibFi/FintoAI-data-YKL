schema: '2.0'
stages:
  loadvoc-fi:
    cmd: annif loadvoc ykl-omikuji-parabel-fi corpora/ykl-classes.tsv
    deps:
    - path: corpora/ykl-classes.tsv
      md5: b2f29070ccedefda72994b8db324e371
      size: 187637
    - path: venv-installed
      md5: 2e6baa8289dac9e06cb525999eb39a70
      size: 42
    outs:
    - path: data/vocabs/ykl-fi
      md5: 680732b8de9b5108536ccea40462734e.dir
      size: 764449
      nfiles: 3
  train-omikuji-parabel-fi:
    cmd: annif train ykl-omikuji-parabel-fi -j 8 
      corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
      md5: ffa2c09b76a8a5370dbe71540da8c0ff
      size: 38164190
    - path: data/vocabs/ykl
      md5: 3b9896e0ea6b1a4fa9820f015831fd93.dir
      size: 6503819
      nfiles: 3
    - path: venv-installed
      md5: 2e6baa8289dac9e06cb525999eb39a70
      size: 42
    params:
      projects.toml:
        ykl-omikuji-parabel-fi:
          name: YKL Omikuji Parabel Finnish
          language: fi
          backend: omikuji
          analyzer: voikko(fi)
          vocab: ykl
          ngram: 1
          min_df: 1
    outs:
    - path: data/projects/ykl-omikuji-parabel-fi
      md5: e506a5b142c024d089a449b9ab99da7c.dir
      size: 119198246
      nfiles: 6
  eval-omikuji-parabel-fi:
    cmd: annif eval ykl-omikuji-parabel-fi -j 8 -m Precision@1 -m NDCG 
      --metrics-file reports/test-omikuji-parabel-fi.json 
      corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
      md5: e4497d02e1c12d30de314f25ac5c5a8e
      size: 3289456
    - path: data/projects/ykl-omikuji-parabel-fi
      md5: e506a5b142c024d089a449b9ab99da7c.dir
      size: 119198246
      nfiles: 6
    - path: venv-installed
      md5: 2e6baa8289dac9e06cb525999eb39a70
      size: 42
    outs:
    - path: reports/test-omikuji-parabel-fi.json
      md5: e0079ca11936a9627c9ee5b4a23e4c48
      size: 100
  install:
    cmd: python3 -m venv venv && . venv/bin/activate && pip install -U pip wheel
      setuptools && pip install -r requirements.txt && cp requirements.txt 
      venv-installed
    deps:
    - path: requirements.txt
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    outs:
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
  train-omikuji-bonsai-fi:
    cmd: annif train ykl-omikuji-bonsai-fi -j 8 
      corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
      md5: ffa2c09b76a8a5370dbe71540da8c0ff
      size: 38164190
    - path: data/vocabs/ykl
      md5: 3b9896e0ea6b1a4fa9820f015831fd93.dir
      size: 6503819
      nfiles: 3
    - path: venv-installed
      md5: 2e6baa8289dac9e06cb525999eb39a70
      size: 42
    params:
      projects.toml:
        ykl-omikuji-bonsai-fi:
          name: YKL Omikuji Bonsai Finnish
          language: fi
          backend: omikuji
          cluster_balanced: 'False'
          cluster_k: 100
          max_depth: 3
          analyzer: voikko(fi)
          vocab: ykl
          ngram: 1
          min_df: 1
    outs:
    - path: data/projects/ykl-omikuji-bonsai-fi
      md5: 1166661a5b68a9c155a57d40592d11eb.dir
      size: 114643724
      nfiles: 6
  eval-omikuji-bonsai-fi:
    cmd: annif eval ykl-omikuji-bonsai-fi -j 8 -m Precision@1 -m NDCG 
      --metrics-file reports/test-omikuji-bonsai-fi.json 
      corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
      md5: e4497d02e1c12d30de314f25ac5c5a8e
      size: 3289456
    - path: data/projects/ykl-omikuji-bonsai-fi
      md5: 1166661a5b68a9c155a57d40592d11eb.dir
      size: 114643724
      nfiles: 6
    - path: venv-installed
      md5: 2e6baa8289dac9e06cb525999eb39a70
      size: 42
    outs:
    - path: reports/test-omikuji-bonsai-fi.json
      md5: da9fafaa27f186fff29cb24b505c2fa2
      size: 100
  load-vocab:
    cmd: annif load-vocab ykl corpora/ykl-skos.ttl
    deps:
    - path: corpora/ykl-skos.ttl
      hash: md5
      md5: 674e89e1d7a614a6c0f74a3e6753b493
      size: 4015004
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    outs:
    - path: data/vocabs/ykl
      hash: md5
      md5: a00543fb038610f4cbaab2188a984825.dir
      size: 6704821
      nfiles: 3
  train-omikuji-bonsai@0:
    cmd: annif train ykl-omikuji-bonsai-fi -j 8 
      corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
      hash: md5
      md5: a9d7eed61bbfad80a94783f117586156
      size: 38700291
    - path: data/vocabs/ykl
      hash: md5
      md5: a00543fb038610f4cbaab2188a984825.dir
      size: 6704821
      nfiles: 3
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    params:
      projects.toml:
        ykl-omikuji-bonsai-fi:
          name: YKL Omikuji Bonsai Finnish
          language: fi
          backend: omikuji
          cluster_balanced: 'False'
          cluster_k: 100
          max_depth: 3
          analyzer: voikko(fi)
          vocab: ykl
          ngram: 1
          min_df: 1
          access: hidden
    outs:
    - path: data/projects/ykl-omikuji-bonsai-fi
      hash: md5
      md5: 7027bfe44916fc982305c5ed203a4d5e.dir
      size: 115018207
      nfiles: 6
  eval-omikuji-bonsai@0:
    cmd: annif eval ykl-omikuji-bonsai-fi -j 8 -m Precision@1 -m NDCG 
      --metrics-file reports/test-omikuji-bonsai-fi.json --results-file 
      reports/test-omikuji-bonsai-fi.csv 
      corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
      hash: md5
      md5: 01cc04f879810d2a8a7fccf2c4453a4e
      size: 4863424
    - path: data/projects/ykl-omikuji-bonsai-fi
      hash: md5
      md5: 7027bfe44916fc982305c5ed203a4d5e.dir
      size: 115018207
      nfiles: 6
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    outs:
    - path: reports/test-omikuji-bonsai-fi.csv
      hash: md5
      md5: 835c546f82d4449cfb38644f21e33422
      size: 269429
    - path: reports/test-omikuji-bonsai-fi.json
      hash: md5
      md5: 13ba261622e1634038088fbcb6baee26
      size: 99
  train-omikuji-bonsai@1:
    cmd: annif train ykl-omikuji-bonsai-sv -j 8 
      corpora/kirjaesittelyt2021/kvesit-ykl-swe-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-swe-train.tsv
      hash: md5
      md5: 08e49b93b58bfa6ba2693767ca6b4266
      size: 2480282
    - path: data/vocabs/ykl
      hash: md5
      md5: a00543fb038610f4cbaab2188a984825.dir
      size: 6704821
      nfiles: 3
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    params:
      projects.toml:
        ykl-omikuji-bonsai-sv:
          name: YKL Omikuji Bonsai Swedish
          language: sv
          backend: omikuji
          cluster_balanced: 'False'
          cluster_k: 100
          max_depth: 3
          analyzer: snowball(swedish)
          vocab: ykl
          ngram: 1
          min_df: 1
          access: hidden
    outs:
    - path: data/projects/ykl-omikuji-bonsai-sv
      hash: md5
      md5: 3cec57fcde3cf753f6e676f6debc34b5.dir
      size: 8626985
      nfiles: 6
  train-omikuji-bonsai@2:
    cmd: annif train ykl-omikuji-bonsai-en -j 8 
      corpora/kirjaesittelyt2021/kvesit-ykl-eng-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-eng-train.tsv
      hash: md5
      md5: fc0ac0ce7a57779a9c245afd1da253cf
      size: 1785924
    - path: data/vocabs/ykl
      hash: md5
      md5: a00543fb038610f4cbaab2188a984825.dir
      size: 6704821
      nfiles: 3
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    params:
      projects.toml:
        ykl-omikuji-bonsai-en:
          name: YKL Omikuji Bonsai English
          language: en
          backend: omikuji
          cluster_balanced: 'False'
          cluster_k: 100
          max_depth: 3
          analyzer: snowball(english)
          vocab: ykl
          ngram: 1
          min_df: 1
          access: hidden
    outs:
    - path: data/projects/ykl-omikuji-bonsai-en
      hash: md5
      md5: cdc49e1542306d6a3d11d777a8597d68.dir
      size: 5451187
      nfiles: 6
  eval-omikuji-bonsai@2:
    cmd: annif eval ykl-omikuji-bonsai-en -j 8 -m Precision@1 -m NDCG 
      --metrics-file reports/test-omikuji-bonsai-en.json --results-file 
      reports/test-omikuji-bonsai-en.csv 
      corpora/kirjaesittelyt2021/kvesit-ykl-eng-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-eng-test.tsv
      hash: md5
      md5: 220191142ce0df8ed12a1ba4994bfc4d
      size: 208933
    - path: data/projects/ykl-omikuji-bonsai-en
      hash: md5
      md5: cdc49e1542306d6a3d11d777a8597d68.dir
      size: 5451187
      nfiles: 6
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    outs:
    - path: reports/test-omikuji-bonsai-en.csv
      hash: md5
      md5: 5163e900582c520bce2ab484f8613fe0
      size: 244295
    - path: reports/test-omikuji-bonsai-en.json
      hash: md5
      md5: 151a23612b5bedff42680c48b25a698c
      size: 84
  train-omikuji-parabel@0:
    cmd: annif train ykl-omikuji-parabel-fi -j 8 
      corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-train.tsv
      hash: md5
      md5: a9d7eed61bbfad80a94783f117586156
      size: 38700291
    - path: data/vocabs/ykl
      hash: md5
      md5: a00543fb038610f4cbaab2188a984825.dir
      size: 6704821
      nfiles: 3
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    params:
      projects.toml:
        ykl-omikuji-parabel-fi:
          name: YKL Omikuji Parabel Finnish
          language: fi
          backend: omikuji
          analyzer: voikko(fi)
          vocab: ykl
          ngram: 1
          min_df: 1
          access: hidden
    outs:
    - path: data/projects/ykl-omikuji-parabel-fi
      hash: md5
      md5: 9e1becc49ccd1dd118da77a4da668432.dir
      size: 118900698
      nfiles: 6
  eval-omikuji-parabel@0:
    cmd: annif eval ykl-omikuji-parabel-fi -j 8 -m Precision@1 -m NDCG 
      --metrics-file reports/test-omikuji-parabel-fi.json --results-file 
      reports/test-omikuji-parabel-fi.csv 
      corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
      hash: md5
      md5: 01cc04f879810d2a8a7fccf2c4453a4e
      size: 4863424
    - path: data/projects/ykl-omikuji-parabel-fi
      hash: md5
      md5: 9e1becc49ccd1dd118da77a4da668432.dir
      size: 118900698
      nfiles: 6
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    outs:
    - path: reports/test-omikuji-parabel-fi.csv
      hash: md5
      md5: 71254a2822394d7f56053c188d9ec810
      size: 269521
    - path: reports/test-omikuji-parabel-fi.json
      hash: md5
      md5: aa6acac90c0cf1cdd1e8c5e4a50aee84
      size: 100
  train-omikuji-parabel@1:
    cmd: annif train ykl-omikuji-parabel-sv -j 8 
      corpora/kirjaesittelyt2021/kvesit-ykl-swe-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-swe-train.tsv
      hash: md5
      md5: 08e49b93b58bfa6ba2693767ca6b4266
      size: 2480282
    - path: data/vocabs/ykl
      hash: md5
      md5: a00543fb038610f4cbaab2188a984825.dir
      size: 6704821
      nfiles: 3
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    params:
      projects.toml:
        ykl-omikuji-parabel-sv:
          name: YKL Omikuji Parabel Swedish
          language: sv
          backend: omikuji
          analyzer: snowball(swedish)
          vocab: ykl
          ngram: 1
          min_df: 1
          access: hidden
    outs:
    - path: data/projects/ykl-omikuji-parabel-sv
      hash: md5
      md5: f1ee973a0bd86b5902527429e64a2888.dir
      size: 9257444
      nfiles: 6
  eval-omikuji-parabel@1:
    cmd: annif eval ykl-omikuji-parabel-sv -j 8 -m Precision@1 -m NDCG 
      --metrics-file reports/test-omikuji-parabel-sv.json --results-file 
      reports/test-omikuji-parabel-sv.csv 
      corpora/kirjaesittelyt2021/kvesit-ykl-swe-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-swe-test.tsv
      hash: md5
      md5: fa7430b02f93bc8ff7b02329b514eb51
      size: 295200
    - path: data/projects/ykl-omikuji-parabel-sv
      hash: md5
      md5: f1ee973a0bd86b5902527429e64a2888.dir
      size: 9257444
      nfiles: 6
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    outs:
    - path: reports/test-omikuji-parabel-sv.csv
      hash: md5
      md5: e5dd3b777ebcf0a1f50262d71ff0ce34
      size: 243863
    - path: reports/test-omikuji-parabel-sv.json
      hash: md5
      md5: b136f717a66db10bc4a047d56fce14d8
      size: 97
  train-omikuji-parabel@2:
    cmd: annif train ykl-omikuji-parabel-en -j 8 
      corpora/kirjaesittelyt2021/kvesit-ykl-eng-train.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-eng-train.tsv
      hash: md5
      md5: fc0ac0ce7a57779a9c245afd1da253cf
      size: 1785924
    - path: data/vocabs/ykl
      hash: md5
      md5: a00543fb038610f4cbaab2188a984825.dir
      size: 6704821
      nfiles: 3
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    params:
      projects.toml:
        ykl-omikuji-parabel-en:
          name: YKL Omikuji Parabel English
          language: en
          backend: omikuji
          analyzer: snowball(english)
          vocab: ykl
          ngram: 1
          min_df: 1
          access: hidden
    outs:
    - path: data/projects/ykl-omikuji-parabel-en
      hash: md5
      md5: b610b0c8e92b61b792f1cb3f04a45bab.dir
      size: 5450414
      nfiles: 6
  eval-omikuji-parabel@2:
    cmd: annif eval ykl-omikuji-parabel-en -j 8 -m Precision@1 -m NDCG 
      --metrics-file reports/test-omikuji-parabel-en.json --results-file 
      reports/test-omikuji-parabel-en.csv 
      corpora/kirjaesittelyt2021/kvesit-ykl-eng-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-eng-test.tsv
      hash: md5
      md5: 220191142ce0df8ed12a1ba4994bfc4d
      size: 208933
    - path: data/projects/ykl-omikuji-parabel-en
      hash: md5
      md5: b610b0c8e92b61b792f1cb3f04a45bab.dir
      size: 5450414
      nfiles: 6
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    outs:
    - path: reports/test-omikuji-parabel-en.csv
      hash: md5
      md5: db2a9a00673c41005d0b20ba4b49f46f
      size: 244343
    - path: reports/test-omikuji-parabel-en.json
      hash: md5
      md5: 92207aa6698c38352d538ebd2e8bf35f
      size: 99
  eval-omikuji-bonsai@1:
    cmd: annif eval ykl-omikuji-bonsai-sv -j 8 -m Precision@1 -m NDCG 
      --metrics-file reports/test-omikuji-bonsai-sv.json --results-file 
      reports/test-omikuji-bonsai-sv.csv 
      corpora/kirjaesittelyt2021/kvesit-ykl-swe-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-swe-test.tsv
      hash: md5
      md5: fa7430b02f93bc8ff7b02329b514eb51
      size: 295200
    - path: data/projects/ykl-omikuji-bonsai-sv
      hash: md5
      md5: 3cec57fcde3cf753f6e676f6debc34b5.dir
      size: 8626985
      nfiles: 6
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    outs:
    - path: reports/test-omikuji-bonsai-sv.csv
      hash: md5
      md5: 26d3716cd5c6eb8b63e3864f18fc27e0
      size: 243902
    - path: reports/test-omikuji-bonsai-sv.json
      hash: md5
      md5: 0790c340f319780045d22ec2a16a6cbd
      size: 97
  eval-ensemble@0:
    cmd: annif eval ykl-fi -j 8 -m Precision@1 -m NDCG --metrics-file 
      reports/test-fi.json --results-file reports/test-fi.csv 
      corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-fin-test.tsv
      hash: md5
      md5: 01cc04f879810d2a8a7fccf2c4453a4e
      size: 4863424
    - path: data/projects/ykl-fi
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    outs:
    - path: reports/test-fi.csv
      hash: md5
      md5: a518fa8bc80de087366803ee4df44cc5
      size: 269540
    - path: reports/test-fi.json
      hash: md5
      md5: 6f59554bd8bb4beab2e69065aab1bc5e
      size: 99
  eval-ensemble@1:
    cmd: annif eval ykl-sv -j 8 -m Precision@1 -m NDCG --metrics-file 
      reports/test-sv.json --results-file reports/test-sv.csv 
      corpora/kirjaesittelyt2021/kvesit-ykl-swe-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-swe-test.tsv
      hash: md5
      md5: fa7430b02f93bc8ff7b02329b514eb51
      size: 295200
    - path: data/projects/ykl-sv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    outs:
    - path: reports/test-sv.csv
      hash: md5
      md5: 737dfdab0528e61c0c93d62314c8606e
      size: 243899
    - path: reports/test-sv.json
      hash: md5
      md5: 90067367bc2dc7d9e369927612b84a1b
      size: 98
  eval-ensemble@2:
    cmd: annif eval ykl-en -j 8 -m Precision@1 -m NDCG --metrics-file 
      reports/test-en.json --results-file reports/test-en.csv 
      corpora/kirjaesittelyt2021/kvesit-ykl-eng-test.tsv
    deps:
    - path: corpora/kirjaesittelyt2021/kvesit-ykl-eng-test.tsv
      hash: md5
      md5: 220191142ce0df8ed12a1ba4994bfc4d
      size: 208933
    - path: data/projects/ykl-en
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: venv-installed
      hash: md5
      md5: 523462aeae7c59a03b16e78545cce02c
      size: 41
    outs:
    - path: reports/test-en.csv
      hash: md5
      md5: f703b85eb12c7261868666d210344991
      size: 244344
    - path: reports/test-en.json
      hash: md5
      md5: 4896d7f9a7fc0f6c14f8e2d598ab200a
      size: 99
